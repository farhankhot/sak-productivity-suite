{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/farha/OneDrive/Documents/sak-productivity-suite/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/farha/OneDrive/Documents/sak-productivity-suite/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/farha/OneDrive/Documents/sak-productivity-suite/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useNavigate}from'react-router-dom';import ErrorModal from\"./ErrorModal.js\";// TODO: Add try-catch here\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function DisplayConvos(props){var sessionId=props.sessionId;// console.log(\"DisplayConvos sessionId: \", sessionId);\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoadingConvos=_useState4[0],setIsLoadingConvos=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),threadArray=_useState6[0],setThreadArray=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),threadName=_useState8[0],setThreadName=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),threadId=_useState10[0],setThreadId=_useState10[1];var navigate=useNavigate();useEffect(function(){var handleGetThreads=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,thread;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoadingConvos(true);_context.next=3;return fetch('https://sak-productivity-suite.herokuapp.com/get-convo-threads',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({sessionId:sessionId})});case 3:response=_context.sent;if(!response.ok){_context.next=11;break;}_context.next=7;return response.json();case 7:data=_context.sent;if(data.success===true){thread=data.message;setThreadArray(thread);setIsLoadingConvos(false);}else{console.log(\"an error occurred\");setError(\"error occurred\");}_context.next=13;break;case 11:console.log(\"error occurred\");setError(\"error occurred\");case 13:case\"end\":return _context.stop();}},_callee);}));return function handleGetThreads(){return _ref.apply(this,arguments);};}();if(sessionId){handleGetThreads();}},[sessionId]);var handleThreadClick=function handleThreadClick(threadName){setThreadName(threadName[0]);setThreadId(threadName[1]);};return/*#__PURE__*/_jsxs(_Fragment,{children:[error&&/*#__PURE__*/_jsx(ErrorModal,{errorMessage:error,onClose:function onClose(){return setError(null);}}),threadName&&threadId?navigate(\"/display-thread\",{state:{sessionId:sessionId,threadName:threadName,threadId:threadId}}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Messages\"}),isLoadingConvos?/*#__PURE__*/_jsx(\"p\",{children:\"Getting Conversations...\"}):/*#__PURE__*/_jsx(\"p\",{children:\"Conversations:\"}),threadArray.length>0&&/*#__PURE__*/_jsx(_Fragment,{children:threadArray.map(function(threadName){return/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleThreadClick(threadName);},children:threadName[0]});})})]})]});}export default DisplayConvos;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","ErrorModal","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DisplayConvos","props","sessionId","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","isLoadingConvos","setIsLoadingConvos","_useState5","_useState6","threadArray","setThreadArray","_useState7","_useState8","threadName","setThreadName","_useState9","_useState10","threadId","setThreadId","navigate","handleGetThreads","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","thread","wrap","_callee$","_context","prev","next","fetch","method","headers","body","JSON","stringify","sent","ok","json","success","message","console","log","stop","apply","arguments","handleThreadClick","children","errorMessage","onClose","state","length","map","onClick"],"sources":["C:/Users/farha/OneDrive/Documents/sak-productivity-suite/client/src/DisplayConvos.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport {useNavigate} from 'react-router-dom';\r\nimport ErrorModal from \"./ErrorModal.js\";\r\n\r\n// TODO: Add try-catch here\r\n\r\nfunction DisplayConvos(props) {\r\n\r\n\tconst {sessionId} = props;\r\n\t// console.log(\"DisplayConvos sessionId: \", sessionId);\r\n\tconst [error, setError] = useState(null);\r\n\r\n\tconst [isLoadingConvos, setIsLoadingConvos] = useState(false);\r\n\r\n\tconst [threadArray, setThreadArray] = useState([]);\r\n\tconst [threadName, setThreadName] = useState(null);\r\n\tconst [threadId, setThreadId] = useState(null);\r\n\r\n\tconst navigate = useNavigate();\r\n\r\n\tuseEffect( () => {\r\n\t\tconst handleGetThreads = async () => {\r\n\t\t\tsetIsLoadingConvos(true);\r\n\t\t\tconst response = await fetch('https://sak-productivity-suite.herokuapp.com/get-convo-threads', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\tsessionId: sessionId\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tif (response.ok){\r\n\t\t\t\tconst data = await response.json();\r\n\t\t\t\tif (data.success === true){\r\n\t\t\t\t\tconst thread = data.message;\r\n\t\t\t\t\tsetThreadArray(thread);\r\n\t\t\t\t\tsetIsLoadingConvos(false);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tconsole.log(\"an error occurred\");\r\n\t\t\t\t\tsetError(\"error occurred\");\r\n\t\t\t\t}\r\n\t\t\t}else {\r\n\t\t\t\tconsole.log(\"error occurred\");\r\n\t\t\t\tsetError(\"error occurred\");\r\n\t\t\t}\r\n\t\t};\t\r\n\t\tif (sessionId) {\r\n\t\t\thandleGetThreads();\r\n\t\t}\r\n\t}, [sessionId]);\r\n\t\t\r\n\tconst handleThreadClick = (threadName) => {\r\n\t\tsetThreadName(threadName[0]);\r\n\t\tsetThreadId(threadName[1]);\r\n\t};\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t{error && <ErrorModal errorMessage={error} onClose={() => setError(null)} />}\r\n\r\n\t\t{ (threadName && threadId) ? (\r\n\t\t\tnavigate(\"/display-thread\", {state: {\r\n\t\t\t\tsessionId: sessionId,\r\n\t\t\t\tthreadName: threadName,\r\n\t\t\t\tthreadId: threadId\r\n\t\t\t}})\r\n\t\t) : (\r\n\t\t\t<div>\r\n\t\t\t\t<h1>Messages</h1>\r\n\t\t\t\t{isLoadingConvos ? <p>Getting Conversations...</p> : <p>Conversations:</p>}\r\n\t\t\t\t{threadArray.length > 0 && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t{threadArray.map( (threadName) => (\r\n\t\t\t\t\t\t<button onClick={() => handleThreadClick(threadName)}>{threadName[0]}</button>\r\n\t\t\t\t\t))}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\nexport default DisplayConvos;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}