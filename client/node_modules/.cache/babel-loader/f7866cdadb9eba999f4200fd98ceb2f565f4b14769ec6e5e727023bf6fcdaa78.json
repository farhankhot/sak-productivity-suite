{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/farha/OneDrive/Documents/sak-productivity-suite/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/farha/OneDrive/Documents/sak-productivity-suite/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/farha/OneDrive/Documents/sak-productivity-suite/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useNavigate}from'react-router-dom';import ErrorModal from\"./ErrorModal.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function DisplayConvos(props){var sessionId=props.sessionId;// console.log(\"DisplayConvos sessionId: \", sessionId);\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoadingConvos=_useState2[0],setIsLoadingConvos=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),threadArray=_useState4[0],setThreadArray=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),threadName=_useState6[0],setThreadName=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),threadId=_useState8[0],setThreadId=_useState8[1];var navigate=useNavigate();useEffect(function(){var handleGetThreads=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,thread;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoadingConvos(true);_context.next=3;return fetch('https://sak-productivity-suite.herokuapp.com/get-convo-threads',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({sessionId:sessionId})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;if(data.success===true){thread=data.message;setThreadArray(thread);setIsLoadingConvos(false);}else{/*#__PURE__*/_jsx(ErrorModal,{errorMessage:data.message});}case 8:case\"end\":return _context.stop();}},_callee);}));return function handleGetThreads(){return _ref.apply(this,arguments);};}();if(sessionId){handleGetThreads();}},[sessionId]);var handleThreadClick=function handleThreadClick(threadName){setThreadName(threadName[0]);setThreadId(threadName[1]);};return/*#__PURE__*/_jsx(_Fragment,{children:threadName&&threadId?// <DisplayThread sessionId={sessionId} threadName={threadName} threadId={threadId} />\nnavigate(\"/display-thread\",{state:{sessionId:sessionId,threadName:threadName,threadId:threadId}}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Messages\"}),isLoadingConvos?/*#__PURE__*/_jsx(\"p\",{children:\"Getting Conversations...\"}):/*#__PURE__*/_jsx(\"p\",{children:\"Conversations:\"}),threadArray.length>0&&/*#__PURE__*/_jsx(_Fragment,{children:threadArray.map(function(threadName){return/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleThreadClick(threadName);},children:threadName[0]});})})]})});}export default DisplayConvos;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","ErrorModal","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DisplayConvos","props","sessionId","_useState","_useState2","_slicedToArray","isLoadingConvos","setIsLoadingConvos","_useState3","_useState4","threadArray","setThreadArray","_useState5","_useState6","threadName","setThreadName","_useState7","_useState8","threadId","setThreadId","navigate","handleGetThreads","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","thread","wrap","_callee$","_context","prev","next","fetch","method","headers","body","JSON","stringify","sent","json","success","message","errorMessage","stop","apply","arguments","handleThreadClick","children","state","length","map","onClick"],"sources":["C:/Users/farha/OneDrive/Documents/sak-productivity-suite/client/src/DisplayConvos.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport {useNavigate} from 'react-router-dom';\r\nimport ErrorModal from \"./ErrorModal.js\";\r\n\r\nfunction DisplayConvos(props) {\r\n\r\n\tconst {sessionId} = props;\r\n\t// console.log(\"DisplayConvos sessionId: \", sessionId);\r\n\r\n\tconst [isLoadingConvos, setIsLoadingConvos] = useState(false);\r\n\r\n\tconst [threadArray, setThreadArray] = useState([]);\r\n\tconst [threadName, setThreadName] = useState(null);\r\n\tconst [threadId, setThreadId] = useState(null);\r\n\r\n\tconst navigate = useNavigate();\r\n\r\n\tuseEffect( () => {\r\n\t\tconst handleGetThreads = async () => {\r\n\t\t\tsetIsLoadingConvos(true);\r\n\t\t\tconst response = await fetch('https://sak-productivity-suite.herokuapp.com/get-convo-threads', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\tsessionId: sessionId\r\n\t\t\t\t})\r\n\t\t\t});\r\n\r\n\t\t\tconst data = await response.json();\r\n\t\t\tif (data.success === true){\r\n\t\t\t\tconst thread = data.message;\r\n\t\t\t\tsetThreadArray(thread);\r\n\t\t\t\tsetIsLoadingConvos(false);\r\n\t\t\t}else {\r\n\t\t\t\t<ErrorModal errorMessage={data.message}/>\r\n\t\t\t}\r\n\t\t};\t\r\n\t\tif (sessionId) {\r\n\t\t\thandleGetThreads();\r\n\t\t}\r\n\t}, [sessionId]);\r\n\t\t\r\n\tconst handleThreadClick = (threadName) => {\r\n\t\tsetThreadName(threadName[0]);\r\n\t\tsetThreadId(threadName[1]);\r\n\t};\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t{ (threadName && threadId) ? (\r\n\t\t\t// <DisplayThread sessionId={sessionId} threadName={threadName} threadId={threadId} />\r\n\t\t\tnavigate(\"/display-thread\", {state: {\r\n\t\t\t\tsessionId: sessionId,\r\n\t\t\t\tthreadName: threadName,\r\n\t\t\t\tthreadId: threadId\r\n\t\t\t}})\r\n\t\t) : (\r\n\t\t\t<div>\r\n\t\t\t\t<h1>Messages</h1>\r\n\t\t\t\t{isLoadingConvos ? <p>Getting Conversations...</p> : <p>Conversations:</p>}\r\n\t\t\t\t{threadArray.length > 0 && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t{threadArray.map( (threadName) => (\r\n\t\t\t\t\t\t<button onClick={() => handleThreadClick(threadName)}>{threadName[0]}</button>\r\n\t\t\t\t\t))}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t)}\r\n\t\t</>\r\n\t)\r\n\r\n}\r\nexport default DisplayConvos;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}