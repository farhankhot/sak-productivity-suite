{"ast":null,"code":"import _slicedToArray from\"C:/Users/farha/OneDrive/Desktop/sak-productivity-suite/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/*global chrome*/import React,{useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AudioRetrieval(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),transcriptTextArea=_useState2[0],setTranscriptTextArea=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),recognition=_useState4[0],setRecognition=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),overallTranscript=_useState6[0],setOverallTranscript=_useState6[1];var timeout=null;var handleStartCapture=function handleStartCapture(){chrome.tabCapture.capture({audio:true},function(stream){var audioContext=new AudioContext();var mediaStreamSource=audioContext.createMediaStreamSource(stream);mediaStreamSource.connect(audioContext.destination);// Set up the speech recognition object\nvar SpeechRecognition=window.speechRecognition||window.webkitSpeechRecognition;var recognition=new SpeechRecognition();recognition.continuous=true;recognition.interimResults=true;recognition.lang='en-US';recognition.listening=true;recognition.start();setRecognition(recognition);// Process the speech recognition results\nvar personSentence=[];recognition.onresult=function(event){var newText=event.results[event.results.length-1][0].transcript;setTranscriptTextArea(newText);personSentence.push(newText);clearTimeout(timeout);timeout=setTimeout(function(){handleStopCapture();},1000);};setOverallTranscript(personSentence);});};var handleStopCapture=function handleStopCapture(){// Is there a scenario where recogntion is not defined?\nif(recognition){recognition.stop();console.log(transcriptTextArea);}};var handleTranscriptTextAreaChange=function handleTranscriptTextAreaChange(event){setTranscriptTextArea(event.target.value);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleStartCapture,children:\"Start audio capture\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleStopCapture,children:\"Stop audio capture and send to AI\"}),/*#__PURE__*/_jsx(\"textarea\",{value:transcriptTextArea,onChange:handleTranscriptTextAreaChange,placeholder:\"The transcript will appear here\"})]});}export default AudioRetrieval;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","AudioRetrieval","_useState","_useState2","_slicedToArray","transcriptTextArea","setTranscriptTextArea","_useState3","_useState4","recognition","setRecognition","_useState5","_useState6","overallTranscript","setOverallTranscript","timeout","handleStartCapture","chrome","tabCapture","capture","audio","stream","audioContext","AudioContext","mediaStreamSource","createMediaStreamSource","connect","destination","SpeechRecognition","window","speechRecognition","webkitSpeechRecognition","continuous","interimResults","lang","listening","start","personSentence","onresult","event","newText","results","length","transcript","push","clearTimeout","setTimeout","handleStopCapture","stop","console","log","handleTranscriptTextAreaChange","target","value","children","onClick","onChange","placeholder"],"sources":["C:/Users/farha/OneDrive/Desktop/sak-productivity-suite/client/src/AudioRetrieval.js"],"sourcesContent":["/*global chrome*/\r\nimport React, {useState, useEffect} from \"react\";\r\n\r\nfunction AudioRetrieval() {\r\n\t\r\n\tconst [transcriptTextArea, setTranscriptTextArea] = useState(\"\");\r\n\tconst [recognition, setRecognition] = useState(null);\r\n\tconst [overallTranscript, setOverallTranscript] = useState(\"\");\r\n\t\r\n\tlet timeout=null;\r\n\t\t\t\t\r\n\tconst handleStartCapture = () => {\r\n\t\t\r\n\t\tchrome.tabCapture.capture({audio: true}, function(stream) {\r\n\t\t\t\r\n\t\t\tconst audioContext = new AudioContext();\r\n\t\t\tconst mediaStreamSource = audioContext.createMediaStreamSource(stream);\r\n\t\t\tmediaStreamSource.connect(audioContext.destination);\r\n\r\n\t\t\t// Set up the speech recognition object\r\n\t\t\tconst SpeechRecognition = window.speechRecognition || window.webkitSpeechRecognition;\r\n\t\t\tconst recognition = new SpeechRecognition();\r\n\r\n\t\t\trecognition.continuous = true;\r\n\t\t\trecognition.interimResults = true;\r\n\t\t\trecognition.lang = 'en-US';\r\n\t\t\trecognition.listening = true;\r\n\t\t\t\r\n\t\t\trecognition.start();\r\n\t\t\tsetRecognition(recognition);\r\n\r\n\t\t\t// Process the speech recognition results\r\n\t\t\tlet personSentence=[];\r\n\t\t\trecognition.onresult = function(event) {\r\n\t\t\t\t\r\n\t\t\t\tconst newText = event.results[event.results.length - 1][0].transcript;\r\n\t\t\t\tsetTranscriptTextArea(newText);\r\n\t\t\t\tpersonSentence.push(newText);\r\n\t\t\t\t\r\n\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\ttimeout = setTimeout( () => {\r\n\t\t\t\t\thandleStopCapture();\r\n\t\t\t\t}, 1000);\r\n\r\n\t\t\t}\r\n\t\t\r\n\t\t\tsetOverallTranscript(personSentence);\r\n\t\t\t\t\t\t\r\n\t\t});\r\n\t\t\r\n\t};\r\n\t\r\n\tconst handleStopCapture = () => {\r\n\t\t\r\n\t\t// Is there a scenario where recogntion is not defined?\r\n\t\tif (recognition) { \r\n\t\t\trecognition.stop();\r\n\t\t\tconsole.log(transcriptTextArea);\r\n\t\t}\r\n\t};\r\n\t\t\r\n\tconst handleTranscriptTextAreaChange = (event) => {\r\n\t\tsetTranscriptTextArea(event.target.value);\r\n\t};\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t<button onClick={handleStartCapture}>\r\n\t\t\tStart audio capture\r\n\t\t</button>\r\n\t\t<button onClick={handleStopCapture}>\r\n\t\t\tStop audio capture and send to AI\r\n\t\t</button>\r\n\t\t<textarea value={transcriptTextArea} onChange={handleTranscriptTextAreaChange} placeholder=\"The transcript will appear here\"></textarea>\r\n\t\t</>\r\n\t);\r\n\r\n}\r\nexport default AudioRetrieval;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}